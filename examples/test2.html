<!doctype html>
<html>
	<head>
		<title>jQuery.scrollFocus test page</title>
		<style>
			html {
				overflow-y: scroll;
			}
			body {
				margin: 0;
				background-color:#269;
				background-image: linear-gradient(white 2px, transparent 2px),
				linear-gradient(90deg, white 2px, transparent 2px),
				linear-gradient(rgba(255,255,255,.3) 1px, transparent 1px),
				linear-gradient(90deg, rgba(255,255,255,.3) 1px, transparent 1px);
				background-size:100px 100px, 100px 100px, 20px 20px, 20px 20px;
				background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;
			}
			div {
				outline: 1px solid #000;
			}
			#viewport {
				margin-top: 300px;
				padding: 20px;
			}
			#overlay {
				background: #fff;
				position: fixed;
				top: 0;
				right: 0;
				left: 0;
				height: 300px;
			}
			.doc {
				margin: 20px;
				padding: 20px;
				height: 180px;
				background: #fff;
			}
		</style>
	</head>
	
	<body class="grid-overlay">
		<div id="viewport" contentEditable="true">
			<div class="doc">1 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">2 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">3 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">4 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">5 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">6 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">7 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">8 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">9 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">10 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">11 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">12 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">13 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">14 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">15 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">16 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">17 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">18 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">19 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
			<div class="doc">20 Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde obcaecati illum asperiores veniam ut ullam dolorem consequuntur possimus iure quidem nulla velit! Totam nobis sed numquam iure nostrum molestias dignissimos.</div>
		</div>
		<div id="overlay">Meep</div>
		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
		<script src="../jquery.scrollfocus.js"></script>
		<script>
			function getViewport() {
				var overlayHeight = $('#overlay').height();
				return {
					left: 0,
					top: overlayHeight,
					height: document.documentElement.clientHeight - overlayHeight,
					width: document.documentElement.clientWidth,
					padding: 40
				};
			}

			$(document).on('click', '*', function(event) {
				$(window).scrollFocus({
					target: event.target,
					viewport: getViewport(),
					point: 'left top',
					toPoint: 'left top'
				});
				return false;
			});
			$(document).on('selectionchange', function() {
				var selection = document.getSelection();
				if (!selection.rangeCount)
					return;

				var range = selection.getRangeAt(0);
				$(window).scrollFocus({
					target: range,
					viewport: getViewport(),
					point: selection.focusNode === range.startContainer ? 'left top' : 'right bottom'
				});
			});
		</script>
	</body>
</html>