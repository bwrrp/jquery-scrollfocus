(function(n){function j(b,d,c){arguments.length&&(this.left=b,this.top=d,this.offsetParent=c)}function f(b,d,c,a,e){arguments.length&&(this.origin=new j(b,d,e&&e.origin),this.width=c,this.height=a,this.parentBox=e)}function h(b){f.call(this,0,0,0,0,new l(b));this.element=b;this.refresh()}function l(b){var d=b.offsetParent&&b.offsetParent!==b.ownerDocument.body?new h(b.offsetParent):new k(b.ownerDocument);f.call(this,b.offsetLeft,b.offsetTop,b.offsetWidth,b.offsetHeight,d);this.element=b}function k(b){f.call(this,
0,0,0,0,null);this.document=b;this.refresh()}function m(b){return 0===b.left&&0===b.top&&0===b.right&&0===b.bottom}j.prototype.absolute=function(){if(!this.offsetParent)return this;var b=this.offsetParent.absolute();return new j(b.left+this.left,b.top+this.top,null)};j.prototype.relativeTo=function(b){var d=b?b.absolute():{left:0,top:0},c=this.absolute();return new j(c.left-d.left,c.top-d.top,b)};f.prototype.topLeft=function(){return this.origin};f.prototype.bottomRight=function(){return new j(this.width,
this.height,this.origin)};f.prototype.relativeTo=function(b){var d=this.origin.relativeTo(b&&b.origin);return new f(d.left,d.top,this.width,this.height,b)};h.prototype=new f;h.prototype.constructor=h;h.prototype.refresh=function(){this.origin.left=-this.element.scrollLeft;this.origin.top=-this.element.scrollTop;this.width=this.element.scrollWidth;this.height=this.element.scrollHeight};h.prototype.scrollTo=function(b,d){this.element.scrollTop=d;this.element.scrollLeft=b;this.refresh()};l.prototype=
new f;l.prototype.constructor=l;k.prototype=new f;k.prototype.constructor=k;k.prototype.refresh=function(){var b=this.document.defaultView,d=this.document.documentElement;this.origin.left=-b.pageXOffset;this.origin.top=-b.pageYOffset;this.width=d.offsetWidth;this.height=d.offsetHeight};k.prototype.scrollTo=function(b,d){this.document.defaultView.scrollTo(b,d);this.refresh()};var p={point:"left top"};n.fn.scrollFocus=function(b){n(this).each(function(){var d=b.target;if(b.startContainer||1===b.nodeType)d=
b,b={};b=n.extend({},p,b);if(d.startContainer){var c;c=d.getBoundingClientRect();if(m(c)){var a=d.cloneRange();if((3===a.endContainer.nodeType||4===a.endContainer.nodeType)&&a.endOffset===a.endContainer.length&&a.endContainer.length)a.setEnd(a.endContainer,a.endOffset-1),c=a.getBoundingClientRect();for(;m(c);)(3===a.endContainer.nodeType||4===a.endContainer.nodeType)&&a.endOffset<a.endContainer.length?a.setEnd(a.endContainer,a.endOffset+1):1===a.endContainer.nodeType&&a.endOffset<a.endContainer.childNodes.length?
a.setEnd(a.endContainer.childNodes[a.endOffset],0):a.setEndAfter(a.endContainer),c=a.getBoundingClientRect();a.detach()}a=d.commonAncestorContainer;if(m(c)){for(d=d.cloneRange();m(c);)extendRight(d),c=d.getBoundingClientRect();d.detach()}1!==a.nodeType&&(a=a.parentNode);d=(new f(c.left,c.top,c.right-c.left,c.bottom-c.top,null)).relativeTo(new h(a))}else d=new l(d);c=d;d=1===this.nodeType?new h(this):new k(this.document);a=d.parentBox;a||(a=this.document?this.document:this.ownerDocument||this,a=new f(0,
0,a.documentElement.clientWidth,a.documentElement.clientHeight,null));if(b.viewport)var e=b.viewport,g=e.padding||0,a=new f(e.left+g||0,e.top+g||0,(e.width||(a?a.width:scrollable.width))-2*g,(e.height||(a?a.height:scrollable.height))-2*g,a);if(b.toPoint){g=b.toPoint;e=new f(0,0,a.width,a.height,a);for(g=g.split(/\s+/);g.length;)switch(g.pop().toLowerCase()){case "left":e.origin.left=0;e.width=0;break;case "top":e.origin.top=0;e.height=0;break;case "right":e.origin.left=a.width;e.width=0;break;case "bottom":e.origin.top=
a.height,e.height=0}a=e}e=b.point;c=new j(0,0,c.origin);if("string"===typeof e)for(e=e.split(/\s+/);e.length;)switch(e.pop().toLowerCase()){case "left":c.left=0;break;case "top":c.top=0;break;case "right":c.left=targetBox.width;break;case "bottom":c.top=targetBox.height;break;case "center":c.left=targetBox.width/2;break;case "middle":c.top=targetBox.height/2}c=c.relativeTo(a.origin);0<=c.left&&c.left<a.width&&(c.left=0);0<=c.top&&c.top<a.height&&(c.top=0);c.left>=a.width&&(c.left-=a.width);c.top>=
a.height&&(c.top-=a.height);d.scrollTo(-d.origin.left+c.left,-d.origin.top+c.top)})}})(jQuery);