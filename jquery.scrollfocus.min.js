(function(m){function h(a,c,d){arguments.length&&(this.left=a,this.top=c,this.offsetParent=d)}function f(a,c,d,b,e){arguments.length&&(this.origin=new h(a,c,e&&e.origin),this.width=d,this.height=b,this.parentBox=e)}function g(a){f.call(this,0,0,0,0,new k(a));this.element=a;this.refresh()}function k(a){var c=a.offsetParent&&a.offsetParent!==a.ownerDocument.body?new g(a.offsetParent):new j(a.ownerDocument);f.call(this,a.offsetLeft,a.offsetTop,a.offsetWidth,a.offsetHeight,c);this.element=a}function j(a){f.call(this,
0,0,0,0,null);this.document=a;this.refresh()}function l(a){return 0===a.left&&0===a.top&&0===a.right&&0===a.bottom}h.prototype.absolute=function(){if(!this.offsetParent)return this;var a=this.offsetParent.absolute();return new h(a.left+this.left,a.top+this.top,null)};h.prototype.relativeTo=function(a){var c=a?a.absolute():{left:0,top:0},d=this.absolute();return new h(d.left-c.left,d.top-c.top,a)};f.prototype.topLeft=function(){return this.origin};f.prototype.bottomRight=function(){return new h(this.width,
this.height,this.origin)};f.prototype.relativeTo=function(a){var c=this.origin.relativeTo(a&&a.origin);return new f(c.left,c.top,this.width,this.height,a)};g.prototype=new f;g.prototype.constructor=g;g.prototype.refresh=function(){this.origin.left=-this.element.scrollLeft;this.origin.top=-this.element.scrollTop;this.width=this.element.scrollWidth;this.height=this.element.scrollHeight};g.prototype.scrollTo=function(a,c){this.element.scrollTop=c;this.element.scrollLeft=a;this.refresh()};k.prototype=
new f;k.prototype.constructor=k;j.prototype=new f;j.prototype.constructor=j;j.prototype.refresh=function(){var a=this.document.defaultView,c=this.document.documentElement;this.origin.left=-a.pageXOffset;this.origin.top=-a.pageYOffset;this.width=c.offsetWidth;this.height=c.offsetHeight};j.prototype.scrollTo=function(a,c){this.document.defaultView.scrollTo(a,c);this.refresh()};var p={point:"left top"};m.fn.scrollFocus=function(a){m(this).each(function(){var c=a.target;if(a.startContainer||1===a.nodeType)c=
a,a={};a=m.extend({},p,a);if(c.startContainer){var d;d=c.getBoundingClientRect();if(l(d)){var b=c.cloneRange();if((3===b.endContainer.nodeType||4===b.endContainer.nodeType)&&b.endOffset===b.endContainer.length&&b.endContainer.length)b.setEnd(b.endContainer,b.endOffset-1),d=b.getBoundingClientRect();for(;l(d);)(3===b.endContainer.nodeType||4===b.endContainer.nodeType)&&b.endOffset<b.endContainer.length?b.setEnd(b.endContainer,b.endOffset+1):1===b.endContainer.nodeType&&b.endOffset<b.endContainer.childNodes.length?
b.setEnd(b.endContainer.childNodes[b.endOffset],0):b.setEndAfter(b.endContainer),d=b.getBoundingClientRect();b.detach()}b=c.commonAncestorContainer;if(l(d)){for(c=c.cloneRange();l(d);)extendRight(c),d=c.getBoundingClientRect();c.detach()}1!==b.nodeType&&(b=b.parentNode);c=(new f(d.left,d.top,d.right-d.left,d.bottom-d.top,null)).relativeTo(new g(b))}else c=new k(c);d=c;c=1===this.nodeType?new g(this):new j(this.document);b=c.parentBox;if(a.viewport)var e=a.viewport.padding||0,b=new f(a.viewport.left+
e||0,a.viewport.top+e||0,(a.viewport.width||(b?b.width:c.width))-2*e,(a.viewport.height||(b?b.height:c.height))-2*e,b);e=new h(0,0,d.origin);if("string"===typeof a.point)for(var n=a.point.split(/\s+/);n.length;)switch(n.pop().toLowerCase()){case "left":e.left=0;break;case "top":e.top=0;break;case "right":e.left=d.width;break;case "bottom":e.top=d.height;break;case "center":e.left=d.width/2;break;case "middle":e.top=d.height/2}d=b;b=e.relativeTo(d.origin);0<=b.left&&b.left<d.width&&(b.left=0);0<=b.top&&
b.top<d.height&&(b.top=0);b.left>=d.width&&(b.left-=d.width);b.top>=d.height&&(b.top-=d.height);c.scrollTo(-c.origin.left+b.left,-c.origin.top+b.top)})}})(jQuery);