(function(n){function j(b,c,d){arguments.length&&(this.left=b,this.top=c,this.offsetParent=d)}function g(b,c,d,a,e){arguments.length&&(this.origin=new j(b,c,e&&e.origin),this.width=d,this.height=a,this.parentBox=e)}function h(b){g.call(this,0,0,0,0,new l(b));this.element=b;this.refresh()}function l(b){var c=b.offsetParent&&b.offsetParent!==b.ownerDocument.body?new h(b.offsetParent):new k(b.ownerDocument);g.call(this,b.offsetLeft,b.offsetTop,b.offsetWidth,b.offsetHeight,c);this.element=b}function k(b){g.call(this,
0,0,0,0,null);this.document=b;this.refresh()}function m(b){return 0===b.left&&0===b.top&&0===b.right&&0===b.bottom}j.prototype.absolute=function(){if(!this.offsetParent)return this;var b=this.offsetParent.absolute();return new j(b.left+this.left,b.top+this.top,null)};j.prototype.relativeTo=function(b){var c=b?b.absolute():{left:0,top:0},d=this.absolute();return new j(d.left-c.left,d.top-c.top,b)};g.prototype.topLeft=function(){return this.origin};g.prototype.bottomRight=function(){return new j(this.width,
this.height,this.origin)};g.prototype.relativeTo=function(b){var c=this.origin.relativeTo(b&&b.origin);return new g(c.left,c.top,this.width,this.height,b)};h.prototype=new g;h.prototype.constructor=h;h.prototype.refresh=function(){this.origin.left=-this.element.scrollLeft;this.origin.top=-this.element.scrollTop;this.width=this.element.scrollWidth;this.height=this.element.scrollHeight};h.prototype.scrollTo=function(b,c){this.element.scrollTop=c;this.element.scrollLeft=b;this.refresh()};l.prototype=
new g;l.prototype.constructor=l;k.prototype=new g;k.prototype.constructor=k;k.prototype.refresh=function(){var b=this.document.defaultView,c=this.document.documentElement;this.origin.left=-b.pageXOffset;this.origin.top=-b.pageYOffset;this.width=c.offsetWidth;this.height=c.offsetHeight};k.prototype.scrollTo=function(b,c){this.document.defaultView.scrollTo(b,c);this.refresh()};var p={point:"left top"};n.fn.scrollFocus=function(b){n(this).each(function(){var c=b.target;if(b.startContainer||1===b.nodeType)c=
b,b={};b=n.extend({},p,b);if(c.startContainer){var d;d=c.getBoundingClientRect();if(m(d)){var a=c.cloneRange();if((3===a.endContainer.nodeType||4===a.endContainer.nodeType)&&a.endOffset===a.endContainer.length&&a.endContainer.length)a.setEnd(a.endContainer,a.endOffset-1),d=a.getBoundingClientRect();for(;m(d);)(3===a.endContainer.nodeType||4===a.endContainer.nodeType)&&a.endOffset<a.endContainer.length?a.setEnd(a.endContainer,a.endOffset+1):1===a.endContainer.nodeType&&a.endOffset<a.endContainer.childNodes.length?
a.setEnd(a.endContainer.childNodes[a.endOffset],0):a.setEndAfter(a.endContainer),d=a.getBoundingClientRect();a.detach()}a=c.commonAncestorContainer;if(m(d)){for(c=c.cloneRange();m(d);)extendRight(c),d=c.getBoundingClientRect();c.detach()}1!==a.nodeType&&(a=a.parentNode);c=(new g(d.left,d.top,d.right-d.left,d.bottom-d.top,null)).relativeTo(new h(a))}else c=new l(c);d=c;c=1===this.nodeType?new h(this):new k(this.document);a=c.parentBox;a||(a=this.document?this.document:this.ownerDocument||this,a=new g(0,
0,a.documentElement.clientWidth,a.documentElement.clientHeight,null));if(b.viewport)var e=b.viewport,f=e.padding||0,a=new g(e.left+f||0,e.top+f||0,(e.width||(a?a.width:scrollable.width))-2*f,(e.height||(a?a.height:scrollable.height))-2*f,a);if(b.toPoint){f=b.toPoint;e=new g(0,0,a.width,a.height,a);for(f=f.split(/\s+/);f.length;)switch(f.pop().toLowerCase()){case "left":e.origin.left=0;e.width=0;break;case "top":e.origin.top=0;e.height=0;break;case "right":e.origin.left=a.width;e.width=0;break;case "bottom":e.origin.top=
a.height,e.height=0}a=e}f=b.point;e=new j(0,0,d.origin);if("string"===typeof f)for(f=f.split(/\s+/);f.length;)switch(f.pop().toLowerCase()){case "left":e.left=0;break;case "top":e.top=0;break;case "right":e.left=d.width;break;case "bottom":e.top=d.height;break;case "center":e.left=d.width/2;break;case "middle":e.top=d.height/2}d=a;a=e.relativeTo(d.origin);0<=a.left&&a.left<d.width&&(a.left=0);0<=a.top&&a.top<d.height&&(a.top=0);a.left>=d.width&&(a.left-=d.width);a.top>=d.height&&(a.top-=d.height);
c.scrollTo(-c.origin.left+a.left,-c.origin.top+a.top)})}})(jQuery);